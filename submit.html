<!DOCTYPE html>
<html>
<head>
    <title>Submit an Exhibit</title>
</head>

<body>
    <form>
        <h1>Have an idea of your own? </h1>
        <h3>That\'s awesome! We will show you a live preview of your post on the right as we walk you through
            the process on the left.
        </h3>

        <h1>Let's get down to basics</h1>

        <label for="title">Exhibit name</label>
        <input id='title' />

        <label for="summary">Short summary</label>
        <input id='summary' />

        <label for="thumbnail">Select thumbnail</label>
        <input type='file' id='thumbnail' />

        <label for="additional">Select additional images</label>
        <input type='file' id='additional' />

        <label for="inspiration">What's your inspiration in this exhibit?</label>
        <input id='inspiration' />

        <h1>Now to some more complex things</h1>

        <label for="description">
            Provide us with a detailed description of this exhibit, including all necessary background knowledge.
        </label>
        <input id='description' />

        <label for="tellUs">
            Tell us the kind of things you want to see in this exhibit.
        </label>
        <input id='tellUs' />

        <!-- TODO this one looked really nice with typing and when you hit enter it adds a tag icon with the name -->
        <label for="tags">Add tags to your exhibit</label>
        <input id="tags" />

        <h1>Time to double check</h1>
        <h3>Make sure everything look good over in the preview and then click Finish.</h3>
    </form>

    <button onclick="submitIdea();">Post it!</button>

    <script>
        /*{"id":13,"supported":false,"description":"Description for A banana","created":"2018-10-19T02:59:42.713654Z","title":"A banana","author":"nic","supporterCount":0}*/

        function submitIdea() {
            // these 3 fields are all that backend supports on the branch
            const description = document.getElementById("description").value;
            const title = document.getElementById("title").value;
            const tags = [];

            if (!description || !title) {
                alert("Description and title must be filled in.");
                return;
            }

            const postRequest = new XMLHttpRequest();
            postRequest.onreadystatechange = function() {
                if (this.readyState === 4) {
                    if (this.status === 200) {
                        alert("Exhibit posted successfully.");
                    } else {
                        alert("Could not post exhibit. Please try again later.");
                    }
                }
            };

            // post it
            postRequest.open('POST', 'http://localhost:8080/exhibit/', true);
            postRequest.setRequestHeader("Content-Type", "application/json");
            postRequest.setRequestHeader("Authorization", "Bearer zjones");
            postRequest.send(JSON.stringify({
                description, title, tags
            }));
        }
    </script>
</body>
</html>
